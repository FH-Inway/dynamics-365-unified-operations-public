---
title: Create an Azure file share in the Azure portal
description: Learn how to create an Azure file share for Electronic invoicing, including a step-by-step process for storing connection string in Key Vault.
author: achansoriya
ms.author: achansoriya
ms.topic: how-to
ms.custom: 
  - bap-template
ms.date: 09/18/2024
ms.reviewer: johnmichalak
audience: Application User
ms.search.region: Global
ms.search.validFrom: 09/18/2024
ms.search.form: 
ms.dyn365.ops.version: 10.0.39
---

# Create an Azure file share in the Azure portal 

[!include [banner](../../includes/banner.md)]

Electronic documents generated by Electronic invoicing service can be stored in Microsoft Azure file share, provisioned under a storage account. To ensure that Electronic invoicing can access the file share, you must provide the connection string to the Electronic invoicing service. Additionally, to ensure that the connection string is securely stored, don't provide the connection string directly. Instead, store it in an Azure key vault, and provide an Azure Key Vault secret.

## Prerequisites

Before you begin the procedures in this article, provision an Azure storage account:

- Steps to provision an Azure storage account are described in [Provision Azure storage account](../global/gs-e-invoicing-create-azure-storage-account-azure-portal.md).


1. Open the storage account that you plan to use with the Electronic invoicing service.
2. Go to **Settings** \> **Configuration**, and make sure that the **Allow Blob public access** parameter is set to **Enabled**.
3. Go to **Data storage** \> **Containers**, and create a container.
4. Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.
5. Open the new container, and go to **Settings** \> **Access policy**.
6. Select **Add policy** to add a stored access policy.
7. Set the **Identifier** field as appropriate.
8. In the **Permissions** field, select all permissions.

    ![All permissions selected in the Permissions field in the Add policy dialog box.](../media/e-invoicing-azure-1.png)

9. Enter the start and end dates. The end date should be in future.
10. Select **OK** to save the policy, and then save your changes to the container.
11. Go to **Settings** \> **Shared access tokens**, and set the field values.
12. Enter the start and end dates. The end date should be in future.
13. In the **Permissions** field, select the following permissions:

    - Read
    - Add
    - Create
    - Write
    - Delete
    - List

14. Select **Generate SAS token and URL**.
15. Copy and store the value in the **Blob SAS URL** field. This value will be used later in this procedure and will be referred to as the *shared access signature URI*.
16. Open the key vault that you intend to use with Electronic invoicing.
17. Go to **Settings** \> **Secrets**, and select **Generate/Import** to create a secret.
18. On the **Create a secret** page, in the **Upload options** field, select **Manual**.
19. Enter the name of the secret. This name will be used during the setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*. For more information about how to set up RCS,see [Set up Regulatory Configuration Service (RCS)](e-invoicing-set-up-rcs.md).
20. In the **Value** field, enter the shared access signature URI that you copied earlier.
21. Select **Create**.

